{% extends "core/base.html" %}
{% block content %}
  <h3>Dashboard</h3>

  <h4>Portfolio</h4>
  <ul>
    <li><b>Properties:</b> {{ properties_count }}</li>
    <li><b>Active Tenants:</b> {{ active_tenants_count }}</li>
  </ul>

  <h4>Rent Overview</h4>
  <ul>
    <li><b>Paid:</b> {{ rent_paid_count }} (Total: {{ rent_paid_total }})</li>
    <li><b>Due:</b> {{ rent_due_count }} (Total: {{ rent_due_total }})</li>
    <li><b>Late:</b> {{ rent_late_count }} (Total: {{ rent_late_total }})</li>
    <h4>Rent This Month ({{ current_month }}/{{ current_year }})</h4>
  <ul>
  <li><b>Paid:</b> {{ paid_this_month }}</li>
  <li><b>Due:</b> {{ due_this_month }}</li>
  <li><b>Late:</b> {{ late_this_month }}</li>
  </ul>

  </ul>

  <h4>Maintenance</h4>
  <ul>
    <li><b>Open:</b> {{ open_maintenance_count }}</li>
    <li><b>In Progress:</b> {{ in_progress_maintenance_count }}</li>
    <li><b>Urgent Open:</b> {{ urgent_open_count }}</li>
    <li><b>High Priority Open:</b> {{ high_open_count }}</li>
  </ul>

  <h4>Per Property Summary</h4>

  {% if property_summaries %}
  <table border="1" cellpadding="6" cellspacing="0">
    <tr>
      <th>Property</th>
      <th>Active Tenants</th>
      <th>Rent Paid (Total)</th>
      <th>Rent Due (Total)</th>
      <th>Rent Late (Total)</th>
      <th>Open Maintenance</th>
      <th>Urgent Open</th>
    </tr>

    {% for row in property_summaries %}
      <tr>
        <td><a href="{% url 'core:property_detail' row.property.id %}">{{ row.property.name }}</a></td>

        <td>{{ row.active_tenants }}</td>
        <td>{{ row.rent_paid_total }}</td>
        <td>{{ row.rent_due_total }}</td>
        <td>{{ row.rent_late_total }}</td>
        <td>{{ row.open_maintenance }}</td>
        <td>{{ row.urgent_open }}</td>
      </tr>
    {% endfor %}
  </table>
{% else %}
  <p>No properties yet.</p>
{% endif %}


  <p style="margin-top: 12px;">
    Next: we can add “This Month Only” filtering and a property-level breakdown.
  </p>
{% endblock %}
